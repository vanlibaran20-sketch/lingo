# ====================== BÃ–LÃœM 1: GEREKLÄ° KÃœTÃœPHANELER VE DEÄÄ°ÅKENLER ======================
import datetime

# Uygulama iÃ§in temel deÄŸiÅŸkenler
kullanici_listesi = []
sistem_baslangic_zamani = datetime.datetime.now()


# ====================== BÃ–LÃœM 2: KULLANICI BÄ°LGÄ°LERÄ° GÄ°RÄ°Å FONKSÄ°YONU ======================
def kullanici_ekle():
    print("\n--- YENÄ° KULLANICI EKLE ---")
    ad = input("KullanÄ±cÄ± adÄ±: ")
    soyad = input("KullanÄ±cÄ± soyadÄ±: ")
    yas = int(input("KullanÄ±cÄ± yaÅŸÄ±: "))
    
    kullanici = {
        "ad": ad,
        "soyad": soyad,
        "yas": yas,
        "kayit_tarihi": datetime.datetime.now().strftime("%d.%m.%Y %H:%M")
    }
    
    kullanici_listesi.append(kullanici)
    print(f"{ad} {soyad} baÅŸarÄ±yla eklendi!")


# ====================== BÃ–LÃœM 3: KULLANICI LÄ°STESÄ°NÄ° GÃ–STER FONKSÄ°YONU ======================
def kullanicilari_goster():
    print("\n--- TÃœM KULLANICILAR ---")
    if not kullanici_listesi:
        print("HenÃ¼z hiÃ§ kullanÄ±cÄ± eklenmemiÅŸ.")
        return
    
    for idx, kullanici in enumerate(kullanici_listesi, 1):
        print(f"{idx}. {kullanici['ad']} {kullanici['soyad']} | YaÅŸ: {kullanici['yas']} | KayÄ±t tarihi: {kullanici['kayit_tarihi']}")


# ====================== BÃ–LÃœM 4: KULLANICI ARAMA FONKSÄ°YONU ======================
def kullanici_ara():
    print("\n--- KULLANICI ARA ---")
    arama_kelimesi = input("Aramak istediÄŸiniz ad veya soyad: ").lower()
    bulunanlar = []
    
    for kullanici in kullanici_listesi:
        if arama_kelimesi in kullanici['ad'].lower() or arama_kelimesi in kullanici['soyad'].lower():
            bulunanlar.append(kullanici)
    
    if bulunanlar:
        print(f"{len(bulunanlar)} kullanÄ±cÄ± bulundu:")
        for kullanici in bulunanlar:
            print(f"- {kullanici['ad']} {kullanici['soyad']} | YaÅŸ: {kullanici['yas']}")
    else:
        print("HiÃ§ kullanÄ±cÄ± bulunamadÄ±.")


# ====================== BÃ–LÃœM 5: KULLANICI BÄ°LGÄ°LERÄ° GÃœNCELLEME FONKSÄ°YONU ======================
def kullanici_guncelle():
    print("\n--- KULLANICI GÃœNCELLE ---")
    kullanicilari_goster()
    
    if not kullanici_listesi:
        return
    
    try:
        secim = int(input("GÃ¼ncellemek istediÄŸiniz kullanÄ±cÄ±nÄ±n numarasÄ±nÄ± girin: ")) - 1
        if 0 <= secim < len(kullanici_listesi):
            kullanici = kullanici_listesi[secim]
            print(f"\nMevcut bilgiler: {kullanici['ad']} {kullanici['soyad']} | YaÅŸ: {kullanici['yas']}")
            
            yeni_ad = input("Yeni ad (boÅŸ bÄ±rakÄ±lÄ±rsa deÄŸiÅŸmez): ") or kullanici['ad']
            yeni_soyad = input("Yeni soyad (boÅŸ bÄ±rakÄ±lÄ±rsa deÄŸiÅŸmez): ") or kullanici['soyad']
            yeni_yas = input("Yeni yaÅŸ (boÅŸ bÄ±rakÄ±lÄ±rsa deÄŸiÅŸmez): ") or kullanici['yas']
            
            kullanici['ad'] = yeni_ad
            kullanici['soyad'] = yeni_soyad
            kullanici['yas'] = int(yeni_yas)
            print("KullanÄ±cÄ± bilgileri baÅŸarÄ±yla gÃ¼ncellendi!")
        else:
            print("GeÃ§ersiz kullanÄ±cÄ± numarasÄ±.")
    except ValueError:
        print("LÃ¼tfen geÃ§erli bir sayÄ± girin.")


# ====================== BÃ–LÃœM 6: KULLANICI SÄ°LME FONKSÄ°YONU ======================
def kullanici_sil():
    print("\n--- KULLANICI SÄ°L ---")
    kullanicilari_goster()
    
    if not kullanici_listesi:
        return
    
    try:
        secim = int(input("Silmek istediÄŸiniz kullanÄ±cÄ±nÄ±n numarasÄ±nÄ± girin: ")) - 1
        if 0 <= secim < len(kullanici_listesi):
            silinen = kullanici_listesi.pop(secim)
            print(f"{silinen['ad']} {silinen['soyad']} baÅŸarÄ±yla silindi!")
        else:
            print("GeÃ§ersiz kullanÄ±cÄ± numarasÄ±.")
    except ValueError:
        print("LÃ¼tfen geÃ§erli bir sayÄ± girin.")


# ====================== BÃ–LÃœM 7: YAÅ ORTALAMASI HESAPLAMA FONKSÄ°YONU ======================
def yas_ortalamasini_hesapla():
    print("\n--- YAÅ ORTALAMASI ---")
    if not kullanici_listesi:
        print("Hesaplamak iÃ§in kullanÄ±cÄ± yok.")
        return
    
    toplam_yas = sum(k['yas'] for k in kullanici_listesi)
    ortalama = toplam_yas / len(kullanici_listesi)
    print(f"KullanÄ±cÄ±larÄ±n yaÅŸ ortalamasÄ±: {ortalama:.1f}")


# ====================== BÃ–LÃœM 8: SÄ°STEM BÄ°LGÄ°LERÄ° GÃ–STER FONKSÄ°YONU ======================
def sistem_bilgileri_goster():
    print("\n--- SÄ°STEM BÄ°LGÄ°LERÄ° ---")
    print(f"Sistem baÅŸlatÄ±ldÄ±: {sistem_baslangic_zamani.strftime('%d.%m.%Y %H:%M')}")
    print(f"Åu anki zaman: {datetime.datetime.now().strftime('%d.%m.%Y %H:%M')}")
    print(f"Toplam kullanÄ±cÄ± sayÄ±sÄ±: {len(kullanici_listesi)}")


# ====================== BÃ–LÃœM 9: VERÄ°LERÄ° KAYDETME FONKSÄ°YONU ======================
def verileri_kaydet():
    print("\n--- VERÄ°LERÄ° KAYDET ---")
    try:
        with open("kullanicilar.txt", "w", encoding="utf-8") as dosya:
            dosya.write("KULLANICI LÄ°STESÄ°\n")
            dosya.write(f"KayÄ±t tarihi: {datetime.datetime.now().strftime('%d.%m.%Y %H:%M')}\n")
            dosya.write("=====================\n")
            
            for kullanici in kullanici_listesi:
                dosya.write(f"{kullanici['ad']},{kullanici['soyad']},{kullanici['yas']},{kullanici['kayit_tarihi']}\n")
        
        print("Veriler baÅŸarÄ±yla 'kullanicilar.txt' dosyasÄ±na kaydedildi!")
    except Exception as e:
        print(f"KayÄ±t sÄ±rasÄ±nda hata oluÅŸtu: {e}")


# ====================== BÃ–LÃœM 10: VERÄ°LERÄ° YÃœKLEME FONKSÄ°YONU ======================
def verileri_yukle():
    print("\n--- VERÄ°LERÄ° YÃœKLE ---")
    global kullanici_listesi
    try:
        with open("kullanicilar.txt", "r", encoding="utf-8") as dosya:
            satirlar = dosya.readlines()[3:] # Ä°lk 3 satÄ±rÄ± atla
            kullanici_listesi = []
            
            for satir in satirlar:
                if satir.strip():
                    ad, soyad, yas, kayit_tarihi = satir.strip().split(",")
                    kullanici = {
                        "ad": ad,
                        "soyad": soyad,
                        "yas": int(yas),
                        "kayit_tarihi": kayit_tarihi
                    }
                    kullanici_listesi.append(kullanici)
        
        print("Veriler baÅŸarÄ±yla yÃ¼klendi!")
    except FileNotFoundError:
        print("KayÄ±t dosyasÄ± bulunamadÄ±.")
    except Exception as e:
        print(f"YÃ¼kleme sÄ±rasÄ±nda hata oluÅŸtu: {e}")


# ====================== BÃ–LÃœM 11: MENÃœ FONKSÄ°YONU ======================
def ana_menu():
    print("\n===== KULLANICI YÃ–NETÄ°M SÄ°STEMÄ° =====")
    print("1. Yeni KullanÄ±cÄ± Ekle")
    print("2. KullanÄ±cÄ±larÄ± GÃ¶ster")
    print("3. KullanÄ±cÄ± Ara")
    print("4. KullanÄ±cÄ± GÃ¼ncelle")
    print("5. KullanÄ±cÄ± Sil")
    print("6. YaÅŸ OrtalamasÄ± Hesapla")
    print("7. Sistem Bilgileri GÃ¶ster")
    print("8. Verileri Kaydet")
    print("9. Verileri YÃ¼kle")
    print("0. Ã‡Ä±kÄ±ÅŸ")
    print("=====================================")
    
    try:
        return int(input("Ä°ÅŸlem seÃ§iniz: "))
    except ValueError:
        print("LÃ¼tfen geÃ§erli bir sayÄ± girin!")
        return -1


# ====================== BÃ–LÃœM 12: ANA PROGRAM DÃ–NGÃœSÃœ ======================
def main():
    print("ğŸ‰ KullanÄ±cÄ± YÃ¶netim Sistemi BaÅŸlatÄ±lÄ±yor...")
    
    while True:
        secim = ana_menu()
        
        if secim == 1:
            kullanici_ekle()
        elif secim == 2:
            kullanicilari_goster()
        elif secim == 3:
            kullanici_ara()
        elif secim == 4:
            kullanici_guncelle()
        elif secim == 5:
            kullanici_sil()
        elif secim == 6:
            yas_ortalamasini_hesapla()
        elif secim == 7:
            sistem_bilgileri_goster()
        elif secim == 8:
            verileri_kaydet()
        elif secim == 9:
            verileri_yukle()
        elif secim == 0:
            print("\nğŸ‘‹ Sistem kapatÄ±lÄ±yor... Ä°yi gÃ¼nler!")
            break
        else:
            print("\nâš ï¸ GeÃ§ersiz seÃ§enek, tekrar deneyin!")


# ProgramÄ± Ã§alÄ±ÅŸtÄ±r
if __name__ == "__main__":
    main()


